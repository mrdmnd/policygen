pacman -S python-pip python-numpy python-wheel cuda cudnn
yaourt -S intel-mkl

git clone https://github.com/tensorflow/tensorflow
cd tensorflow
./configure

# (yes to CUDA)
# Set CUDA to 9.1 (most recent)
# Accept defaults for everything.

# Build PIP package-generator
# This will take a while. Go get coffee.
# INFO: Elapsed time: 1498.937s, Critical Path: 175.17s
# INFO: Build completed successfully, 7238 total actions

bazel build --config=opt --config=cuda --config=mkl --config=monolithic //tensorflow/tools/pip_package:build_pip_package

# Run PIP package-generator, dump pip package into /tmp
./bazel-bin/tensorflow/tools/pip_package/build_pip_package /tmp/tensorflow_pkg
sudo pip install /tmp/tensorflow_pkg/tensorflow-1.6.0rc1-cp36-cp36m-linux_x86_64.whl

